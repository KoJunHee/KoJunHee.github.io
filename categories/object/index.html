
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="junhee.ko">
    <title>Category: Object - junhee.ko</title>
    <meta name="author" content="junhee.ko">
    
    
    
    <script type="application/ld+json">{}</script>
    <meta name="description" content="always learning">
<meta property="og:type" content="blog">
<meta property="og:title" content="junhee.ko">
<meta property="og:url" content="https://kojunhee.github.io/categories/object/index.html">
<meta property="og:site_name" content="junhee.ko">
<meta property="og:description" content="always learning">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="junhee.ko">
<meta name="twitter:description" content="always learning">
    
    
        
    
    
        <meta property="og:image" content="https://kojunhee.github.io/assets/images/profile.jpg"/>
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/all.css">
    <link rel="stylesheet" href="/assets/css/jquery.fancybox.css">
    <link rel="stylesheet" href="/assets/css/thumbs.css">
    <link rel="stylesheet" href="/assets/css/tranquilpeak.css">
    <!--STYLES END-->
    

    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="2">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a class="header-title-link" href="/ ">junhee.ko</a>
    </div>
    
        
            <a  class="header-right-picture "
                href="#about">
        
        
            <img class="header-picture" src="/assets/images/profile.jpg" alt="Author&#39;s picture"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="2">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a href="/#about">
                    <img class="sidebar-profile-picture" src="/assets/images/profile.jpg" alt="Author&#39;s picture"/>
                </a>
                <h4 class="sidebar-profile-name">junhee.ko</h4>
                
                    <h5 class="sidebar-profile-bio"><p>Always Learning</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/ "
                            
                            title="Home"
                        >
                    
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-categories"
                            
                            title="Categories"
                        >
                    
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Categories</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-archives"
                            
                            title="Archives"
                        >
                    
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Archives</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://github.com/kojunhee" target="_blank" rel="noopener" title="GitHub">
                    
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://facebook.com/kojunheee" target="_blank" rel="noopener" title="Facebook">
                    
                        <i class="sidebar-button-icon fab fa-facebook" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Facebook</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://www.linkedin.com/in/junheeko" target="_blank" rel="noopener" title="LinkedIn">
                    
                        <i class="sidebar-button-icon fab fa-linkedin" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">LinkedIn</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="mailto:junheee.ko@gmail.com" target="_blank" rel="noopener" title="Mail">
                    
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Mail</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="2"
                 class="
                        hasCoverMetaIn
                        ">
                
    <section class="postShorten-group main-content-wrap">
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/2019/11/12/object-chapter3/">
                            [오브젝트] 3장_역할,책임,협력
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2019-11-12T00:00:00+09:00">
	
		    Nov 12, 2019
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/object/">Object</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p>객체지향 설계의 핵심은 협력을 구성하기 위해 적절한 객체를 찾고 적절한 책임을 할당하는 과정에 있다. </p>
<p>상속, 지연 바인딩도 중요하지만, 구현 측면에 치우쳐져 있기 때문에 객체지향 패러다임의 본질과는 거리가 멀다. </p>
<h2 id="01-협력"><a href="#01-협력" class="headerlink" title="01 협력"></a>01 협력</h2><p>앞장의 영화 예매 시스템에서 중요한 것은, 다양한 객체들이 영화 예매라는 기능을 위해 메세지를 주고 받으면서 상호작용 한다는 점이다. </p>
<p>객체들이 애플리케이션의 기능을 구현하기 위해 수행하는 상호작용을 협력이라고 한다. 객체가 협력에 참여하기 위해 수행하는 로직은 책임이다. 객체들이 구행하는 책임들이 모여 객체가 수행하는 역할을 구성한다.</p>
<h5 id="협력"><a href="#협력" class="headerlink" title="협력"></a>협력</h5><p>두 객체 사이의 협력은 하나의 객체가 다른 객체에게 도움을 요청할 때 시작된다. 메세지 전송은 객체 간 협력을 위해 사용할 수 있는 유일한 수단이다.</p>
<p>메세지를 수신한 객체는 메세드를 실행해 요청에 응답한다. Screening 이 Movie 에게 처리를 위임하는 이유는 요금을 계산하는데 필요한 기본 요금과 할인 정책을 가장 잘 알고 있는 객체가 Movie 이기 때문이다. </p>
<p>자율적인 객체란 자신의 상태를 직접 관리하고 스스로의 결정에 따라 행동하는 객체이다. 객체의 자율성을 보장하기 위해서는 필요한 정보와 정보에 기반한 행동을 같은 객체 안에 모아두어야 한다.</p>
<p>결과적으로 객체를 자율적으로 만드는 가장 기본적인 방법은 내부 구현을 캡슐화 하는 것이다. </p>
<p>자율적인 객체는 자신에게 할당된 책임을 수행하던 중에 필요한 정보를 알지 못하거나 외부의 도움이 필요한 경우 적절한 객체에게 메세지를 전송해 협력을 요청한다.</p>
<h5 id="협력이-설계를-위한-문맥을-결정한다"><a href="#협력이-설계를-위한-문맥을-결정한다" class="headerlink" title="협력이 설계를 위한 문맥을 결정한다"></a>협력이 설계를 위한 문맥을 결정한다</h5><p>객체가 참여하는 협력이 객체를 구성하는 행동과 상태를 결정한다. 협력은 객체를 설계하는데 필요한 일종의 문맥을 제공한다.</p>
<p>Movie 가 기본 요금은 fee 와 할인 정책인 discountPolicy 라는 인스턴스 변수를 상태의 일부로 포함하고 있는 이유는 요금 계산이라는 행동을 위해 이 정보들이 필요하기 때문이다.</p>
<h2 id="02-책임"><a href="#02-책임" class="headerlink" title="02 책임"></a>02 책임</h2><p>객체의 책임은 객체가 ‘하는 것’ 과 ‘아는 것’ 으로 구성된다.</p>
<ul>
<li>Movie 하는 것<ul>
<li>요금을 계산하는 것</li>
<li>예매 가격을 계산하는 것</li>
</ul>
</li>
<li>Movie 아는 것<ul>
<li>가격</li>
<li>할인 정책</li>
</ul>
</li>
</ul>
<p>객체지향 개발에서 가장 중요한 능력은 책임을 능숙하게 소프트웨어 객체에 할당하는 것이다. 적절한 협력이 적절한 책임을 제공하고, 적절한 책임을 적절한 객체에게 할당해야한 단순하고 유연한 설계를 만들 수 있다.</p>
<p>관람객이 스스로 가방 안의 현금과 초대장을 처리하고, 판매원이 스스로 매표소의 티켓과 판매 요금을 다루게 한다면 모든 문제는 해결된다. 즉, 자율적인 존재로 만들어야한다.</p>
<h5 id="책임-할당"><a href="#책임-할당" class="headerlink" title="책임 할당"></a>책임 할당</h5><p>객체는 협력에 필요한 지식과 방법을 가장 잘 알고 있는 객체에게 도움을 요청한다. </p>
<ol>
<li><p>책임을 할당한다는 것은 메세지의 이름을 결정하는 것과 같다. ex) 예매하라</p>
</li>
<li><p>메세지를 선택했으면 메세지를 처리할 적절한 객체를 선택해야한다. 영화 예매와 관련된 정보를 가장 많이 알고 있는 객체에게 할당한느 것이 바람직한다. ex) Screening</p>
</li>
<li><p>영화 예매를 위해서는 예매 가격을 계산해야한다. Screening 은 예매에 대해서는 정보 전문가지만, 영화 가격 자체에 대해서는 모른다. 그래서 외부의 객체에게 가격 계산을 요청해야한다. 새로운 메세지가 필요하다. ex) 가격을 계산하라</p>
</li>
<li><p>가격 계산을 위해 정보 전문가가 필요하다. ex) Movie</p>
</li>
</ol>
<h5 id="책임-주도-설계"><a href="#책임-주도-설계" class="headerlink" title="책임 주도 설계"></a>책임 주도 설계</h5><p> 책임 주도 설계 : 책임을 찾고 책임을 수행할 적절한 객체를 찾아 책임을 할당하는 방식으로 협력을 설계하는 방법</p>
<p>협력은 객체를 설계하기 위한 구체적인 문맥을 제공한다. 협력이 책임을 이끌어내고 책임이 협력에 참여할 객체를 결정한다. </p>
<p>책임을 할당할 때 고려해야할 두 가지 요소</p>
<ol>
<li>메세지가 객체를 결정</li>
<li>행동이 상태를 결정</li>
</ol>
<h5 id="메세지가-객체를-결정한다"><a href="#메세지가-객체를-결정한다" class="headerlink" title="메세지가 객체를 결정한다"></a>메세지가 객체를 결정한다</h5><p>메세지가 객체를 선택해야하는 이유</p>
<ol>
<li>객체가 최소한의 인터페이스를 가지게 된다. </li>
<li>추상적인 인터페이스를 가질 수 있다. 무엇을 하는지만 표현해야지, 어떻게 수행하는지는 노출해서는 안된다.</li>
</ol>
<h5 id="행동이-상태를-결정"><a href="#행동이-상태를-결정" class="headerlink" title="행동이 상태를 결정"></a>행동이 상태를 결정</h5><p>객체가 협력에 적합한지를 결정하는 것은 그 객체의 행동이다. 상태는 단지 객체가 행동을 정상 수행하기 위한 필요한 재료일 뿐이다.</p>
<p>협력이 객체의 행동을 결정하고 행동이 상태를 결정한다. 그 행동이 객체의 책임이다.</p>
<h2 id="03-역할"><a href="#03-역할" class="headerlink" title="03 역할"></a>03 역할</h2><p>역할은, 객체가 어떤 특정한 협력 안에서 수행하는 책임의 집합이다.</p>
<p>‘예매하라’ 라는 메세지를 처리하기 위해 적합한 객체로 Screening 을 선택하는 데는 두가지 단계가 있다.</p>
<ol>
<li>영화 예매를 할 수 있는 적절한 역할이 무엇인가 ?</li>
<li>역할을 수행할 객체로 Screening 인스턴스를 선택한다.</li>
</ol>
<h5 id="유연하고-재사용-가능한-협력"><a href="#유연하고-재사용-가능한-협력" class="headerlink" title="유연하고 재사용 가능한 협력"></a>유연하고 재사용 가능한 협력</h5><p>AmountDiscountPolicy 와 PercentDiscountPolicy 인스턴스라는 두가지 종류의 객체가 할인 요금을 계산하라 라는 메세지에 응답할 수 있어야한다. 그럼, 두 종류의 객체가 참여하는 협력을 개별적으로 만들어야할까?</p>
<p>할인 요금을 계산하라라는 메세지에 응답할 수 있는 대표자를 생각한다면 두 협력을 하나로 통합할 수 있다. 이 대표자를 협력에서는 두 종류의 객체로 바꿔 끼울 수 있는 슬롯으로 생각할 수 있다. 이 슬롯이 역할이다.</p>
<p>변경 전의 절차적 설계에서는 Theater 가 전체적인 작업을 도맡아 했다. 변경 후의 객체지향 설계에서는 각 객체가 자신이 맡은 일을 스스로 처리했다. </p>
<h5 id="역할의-구현"><a href="#역할의-구현" class="headerlink" title="역할의 구현"></a>역할의 구현</h5><p>역할을 구현하는 방법</p>
<ol>
<li>추상 클래스 : 책임의 일부를 구현해 놓은 것</li>
<li>인터페이스 : 구현 하나 없이, 책임의 집합을 나열해 놓은 것</li>
</ol>
<h5 id="객체-대-역할"><a href="#객체-대-역할" class="headerlink" title="객체 대 역할"></a>객체 대 역할</h5><p>협력에 참여하는 후보가 여러 종류의 객체에 의해 수행될 필요가 있다면 그 후보는 역할이 된다. 한 종류의 객체만이 협력에 참여할 필요가 있다면 후보는 객체가 된다.</p>
<p>설계 초반에는 적절한 책임과 협력의 큰 그림을 탐색하는 것이 중요하다. 단순하게 객체로 시작하고 반복적으로 책임과 협력을 정제하며 필요한 순간에 객체로부터 역할을 분리하는 것이 좋다.</p>
<h5 id="역할과-추상화"><a href="#역할과-추상화" class="headerlink" title="역할과 추상화"></a>역할과 추상화</h5><p>추상화를 이용한 설계의 장점</p>
<ol>
<li>중요한 정책을 상위 수준에서 단순화할 수 있다.</li>
<li>설계가 유연해진다.</li>
</ol>
<h5 id="배우와-배역"><a href="#배우와-배역" class="headerlink" title="배우와 배역"></a>배우와 배역</h5><p>배우는 연극이 상영될 때 배역이라는 특정한 역할을 연기한다 == 객체는 협력이라는 실행 문맥안에서 특정한 역할을 수행한다.</p>
<p>연극 배우는 연극이 끝나면 배역을 잊고 원래 자기로 돌아온다 == 객체는 협력이 끝나고 협력에서의 역할을 잊고 원래의 객체로 돌아온다.</p>
<p>하나의 배역을 여러 배우가 연기할 수 있다 == 동일한 역할을 수행하는 하나 이상의 객체들이 존재할 수 있다</p>
<p>객체는 다수의 역할을 보유할 수 있지만 객체가 참여하는 특정 협력은 객체의 한가지 역할만 바라볼 수 있다.</p>

                    
                        

                    
                    
                        <p>
                            <a href="/2019/11/12/object-chapter3/#post-footer" class="postShorten-excerpt_link link">
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/2019/11/06/object-chapter2/">
                            [오브젝트] 2장_객체지향 프로그래밍
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2019-11-06T00:00:00+09:00">
	
		    Nov 06, 2019
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/object/">Object</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p>이번 장의 목표는 이 책의 다양한 주제들을 가볍게 살펴보는 것이다.</p>
<h2 id="01-영화-예매-시스템"><a href="#01-영화-예매-시스템" class="headerlink" title="01 영화 예매 시스템"></a>01 영화 예매 시스템</h2><h5 id="요구사항-살펴보기"><a href="#요구사항-살펴보기" class="headerlink" title="요구사항 살펴보기"></a>요구사항 살펴보기</h5><p>38 Page </p>
<h2 id="02-객체지향-프로그래밍을-향해"><a href="#02-객체지향-프로그래밍을-향해" class="headerlink" title="02 객체지향 프로그래밍을 향해"></a>02 객체지향 프로그래밍을 향해</h2><h5 id="협력-객체-클래스"><a href="#협력-객체-클래스" class="headerlink" title="협력, 객체, 클래스"></a>협력, 객체, 클래스</h5><p>객치지향 패러다임은, 클래스가 아닌 객체에 초점을 맞춰야한다. 다음 두가지에 집중해야 한다.</p>
<ol>
<li><p>어떤 클래스가 필요한지를 고민하기 전에, 어떤 객체들이 필요한지 고민하라. 클래스는 공통적인 상태와 행동을 공유하는 객체들을 추상화한 것이다.</p>
</li>
<li><p>객체는 독립적인 존재가 아니라, 기능 구현을 위한 협력 공동체의 일원이다.</p>
</li>
</ol>
<h5 id="도메인의-구조를-따르는-프로그램-구조"><a href="#도메인의-구조를-따르는-프로그램-구조" class="headerlink" title="도메인의 구조를 따르는 프로그램 구조"></a>도메인의 구조를 따르는 프로그램 구조</h5><p>도메인이란, 문제를 해결하기 위해 사용자가 프로그램을 사용하는 분야이다. </p>
<p>객체지향 패러다임에서는, 도메인을 구성하는 개념들이 프로그램의 객체와 클래스로 매끄럽게 연결된다. 일반적으로, 클래스의 이름은 대응되는 도메인의 개념의 이름과 동일하거나 유사하게 지어야한다. </p>
<h5 id="클래스-구현하기"><a href="#클래스-구현하기" class="headerlink" title="클래스 구현하기"></a>클래스 구현하기</h5><p>클래스를 구현하거나 다른 개발자에 의해 개발된 클래스를 사용할 때 가장 중요한 것은, 클래스의 경계를 구분짓는 것이다. </p>
<p>외부에서는 객체의 속성에 직접 접근할 수 없도록 막고 적절한 public 메서드를 통해서만 내부 상태를 변경할 수 있게해야한다. 경계의 명확성이 객체의 자율성을 보장하기 때문이다. 또, 프로그래머에게 구현의 자유를 제공하기 때문이다.</p>
<h5 id="자율적인-객체"><a href="#자율적인-객체" class="headerlink" title="자율적인 객체"></a>자율적인 객체</h5><p>객체는 스스로 판단하고 행동하는 자율적인 존재다. 객체가 자율적인 존재가 되기 위해서는, 외부의 간섭을 최소화해야한다.</p>
<p>캡슐화와 접근 제어는 객체를 두 부분으로 나눈다. (인터베이스와 구현의 분리)</p>
<ol>
<li>Public Interface : 외부에서 접근 가능한 부분</li>
<li>Implementation : 외부에서 접근 불가능한 부분</li>
</ol>
<h5 id="프로그래머의-자유"><a href="#프로그래머의-자유" class="headerlink" title="프로그래머의 자유"></a>프로그래머의 자유</h5><p>프로그래머의 역할은, 클래스 작성자와 클라이언트 프로그래머로 구분할 수 있다.</p>
<ol>
<li>클래스 작성자 : 새로운 데이터 타입을 프로그램에 추가</li>
<li>클라이언트 프로그래머 : 클래스 작성자가 추가한 데이터 타입을 사용</li>
</ol>
<p>클래스 작성자는 클라이언트 프로그래머에게 필요한 부분만 공개하고 나머지는 숨겨야한다. 클라이언트 프로그래머가 숨겨 놓여진 부분에 접근하는것을 막아 내부 구현을 마음대로 변경할 수 있다. (구현 은닉)</p>
<p>객체의 외부와 내부를 구분하면 클라이언트 프로그래머가 알아야할 지식 양이 줄고 클래스 작성자가 자유롭게 구현을 변경할 수 있다. 변경될 가능성이 있는 세부적인 내용은 private 영역으로 감춰 변경으로 인한 혼란을 막을 수 있다.</p>
<h5 id="협력하는-객체들의-공동체"><a href="#협력하는-객체들의-공동체" class="headerlink" title="협력하는 객체들의 공동체"></a>협력하는 객체들의 공동체</h5><p>금액을 Money 클래스로 정의하면, 저장하는 값이 금액과 관련돼 있다는 의미를 전달 할 수 있다. (Long Type 은 그렇지 못함) 객체지향의 장점은 객체를 이용해 도메인의 의미를 풍부하게 표현할 수 있다. </p>
<p>객체지향 프로그램을 작성할 때, 협력의 관점에서 어떤 객체가 필요한지 결정하고, 객체들의 공통 상태와 행위를 구현하기 위해 클래스를 작성한다.</p>
<h5 id="협력"><a href="#협력" class="headerlink" title="협력"></a>협력</h5><p>객체는 다른 객체의 인터페이스에 공개된 행동을 수행하도록 ‘요청’ 할 수 있다. 요청 받은 객체는 요청 처리후에 ‘응답’ 한다. </p>
<p>객체가 다른 객체와 상호작용하는 방법은, ‘메세지’ 를 전송하는 것뿐이다. 메세지를 받는 객체는 메세지를 ‘수신했다’ 고 한다. 수신된 메세지를 처리하기 위한 자신만의 방법을 ‘메서드’ 라고 한다.</p>
<p>메시지를 수신한 Movie 는 스스로 자신의 적절한 메서드를 선택한다. </p>
<h2 id="03-할인-요금-구하기"><a href="#03-할인-요금-구하기" class="headerlink" title="03 할인 요금 구하기"></a>03 할인 요금 구하기</h2><h5 id="할인-요금-계산을-위한-협력-시작하기"><a href="#할인-요금-계산을-위한-협력-시작하기" class="headerlink" title="할인 요금 계산을 위한 협력 시작하기"></a>할인 요금 계산을 위한 협력 시작하기</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Moview</span></span>&#123;</span><br><span class="line">  <span class="keyword">private</span> String title;</span><br><span class="line">  <span class="keyword">private</span> Money fee;</span><br><span class="line">  ...</span><br><span class="line">    </span><br><span class="line">  <span class="function"><span class="keyword">public</span> Money <span class="title">calculateMoneyFee</span><span class="params">(Screening screening)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> fee.minus(discountPolicy.caculateDiscountAmount(screening));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>위 메서드에서, 어떤 할인 정책을 사용할것인지 결정하는 코드가 안보인다. 여기에는 상속과 다형성 개념이 숨겨져있다.</p>
<h5 id="할인-정책과-할인-조건"><a href="#할인-정책과-할인-조건" class="headerlink" title="할인 정책과 할인 조건"></a>할인 정책과 할인 조건</h5><p>할인 정책은, 금액할인 정책 (AmountDiscountPolicy) 과 비율 할인 정책 (PercentDiscountPolicy) 이 있다. 두 클래스는 대부분의 코드가 유사하고 할인 요금 계산하는 방식만 조금 다르기 때문에, 중복 코드 제거를 위해 추상 클래스를 사용한다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">DiscountPolicy</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> List&lt;DiscountCondition&gt; conditions = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">  </span><br><span class="line">	...</span><br><span class="line">    </span><br><span class="line">  <span class="function"><span class="keyword">public</span> Money <span class="title">caculateDiscountAmount</span><span class="params">(Screening screening)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(DiscountCondition each : conditions)&#123;</span><br><span class="line">      <span class="keyword">if</span>(each.isSatifiedBy(screening))&#123;</span><br><span class="line">        <span class="keyword">return</span> getDiscountAmount(screening);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> Money.ZERO;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">abstract</span> <span class="keyword">protected</span> Money <span class="title">getDiscountAmount</span><span class="params">(Screening screening)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>이처럼 부모 클래스에 기본적인 알고리즘의 흐름을 구현하고 중간에 필요한 처리를 자식 클래스에 위임하는 디자인 패턴을, 템플릿 메서드 패턴이라고 한다.</p>
<h5 id="할인-정책-구성하기"><a href="#할인-정책-구성하기" class="headerlink" title="할인 정책 구성하기"></a>할인 정책 구성하기</h5><p>생성자의 파라미터 목록을 이용해 초기화에 필요한 정보를 전달하도록 강제하면, 올바른 상태를 가진 객체의 생성을 보장할 수 있다.</p>
<h2 id="04-상속과-다형성"><a href="#04-상속과-다형성" class="headerlink" title="04 상속과 다형성"></a>04 상속과 다형성</h2><p>Movie 내부에 할인 정책을 결정하는 조건문이 없는데 어떻게 영화 요금을 계산할 때 할인 정책과 비율 할인 정책을 선택할 수 있을까? 답은 상속과 다형성이다.</p>
<h5 id="컴파일-시간-의존성과-실행-시간-의존성"><a href="#컴파일-시간-의존성과-실행-시간-의존성" class="headerlink" title="컴파일 시간 의존성과 실행 시간 의존성"></a>컴파일 시간 의존성과 실행 시간 의존성</h5><p>코드의 의존성과 실행시점의 의존성이 서로 다를 수 있다.</p>
<p>Movie 인스턴스는 실행 시에 AmountDiscountPolicy 나 PercentDiscountPolicy 의 인스턴스에 의존해야한다. 하지만 코드 수준에서는 두 클래스 중에 어떤 것에도 의존하지 않는다. 오직 추상클래스인 DiscountPolicy 에 의존한다.</p>
<p>Movie 인스턴스를 생성하는 코드를 보면, 생성자에서 DiscountPolicy 타입의 객체를 인자로 받는다. 이제 실행시, AmountDiscountPolicy 클래스의 인스턴스에 의존하게 된다. </p>
<h5 id="차이에-의한-프로그래밍"><a href="#차이에-의한-프로그래밍" class="headerlink" title="차이에 의한 프로그래밍"></a>차이에 의한 프로그래밍</h5><p>부모 클래스와 다른 부분만을 추가해서 새로운 클래스를 쉽고 빠르게 만드는 방법을, 차이에 의한 프로그래밍이라고 한다. 상속을 이용하면 클래스 사이의 관게를 설정하는 것만으로 기존 클래스가 가진 모든 속성과 행동을 새로운 클래스에 포함시킬 수 있다.</p>
<h5 id="상속과-인터페이스"><a href="#상속과-인터페이스" class="headerlink" title="상속과 인터페이스"></a>상속과 인터페이스</h5><p>자식 클래스는 부모 클래스가 수신할 수 있는 모든 메세지를 수신할 수 있기 때문에, 외부 객체는 자식 클래스를 부모 클래스와 동일한 타입으로 간주할 수 있다. 자식 클래스가 부모 클래스를 대신하는 것을 업캐스팅이라고 한다.</p>
<h5 id="다형성"><a href="#다형성" class="headerlink" title="다형성"></a>다형성</h5><p>Movie 는 동일한 메세지를 전송하지만, 실제로 어떤 메서드가 실행될 것인지는 메시지를 수신하는 객체의 클래스가 무엇이냐에 따라 다르다. 이것이 다형성이다. </p>
<p>다형성은 컴파일 시간 의존성과 실행 시간 의존성을 다르게 만들 수 있는 객체지향 특성을 이용해 서로 다른 메서드를 실행할 수 있게 한다.</p>
<p>다형성을 구현하는 방법은 다양하지만, 공통점은 메세지에 응답하기 위해 실행될 메서드를 컴파일 시점이 아닌 실행시점에 결정한다는 것이다. 이를 지연바인딩 / 동적바인딩 이라고 한다.</p>
<h5 id="인터페이스와-다형성"><a href="#인터페이스와-다형성" class="headerlink" title="인터페이스와 다형성"></a>인터페이스와 다형성</h5><p>종종 구현을 공유할 필요가 없고, 순수하게 인터페이스만 공유하고 싶을 때가 있다. 자바에서는 인터페이스라는 프로그래밍 요소를 제공한다.</p>
<h2 id="05-추상화와-유연성"><a href="#05-추상화와-유연성" class="headerlink" title="05 추상화와 유연성"></a>05 추상화와 유연성</h2><h5 id="추상화의-힘"><a href="#추상화의-힘" class="headerlink" title="추상화의 힘"></a>추상화의 힘</h5><p>같은 계층에 속하는 클래스들이 공통으로 가질 수 있는 인턴페이스를 구현하며 구현의 일부 (추상클래스) 또는 전체 (인터페이스) 를 자식 클래스가 결정할 수 있도록 결정권을 위임한다.</p>
<p>추상화의 장점은,</p>
<ol>
<li>세부사항에 억눌리지 않고 상위 개념만으로 도메인의 중요한 개념을 설명할 수 있다</li>
<li>기존 구조를 수정하지 않고 새로운 기능을 쉽게 추가하고 확장할 수 있다.</li>
</ol>
<h5 id="유연한-설계"><a href="#유연한-설계" class="headerlink" title="유연한 설계"></a>유연한 설계</h5><p>책임의 위치를 결정하기 위해 조건문을 사용하는 것은 협력의 설계 측면에서 좋지 않은 선택이다. 예를 들면, 0원 이라는 할인 요금을 계산할 책임을 그대로 DiscountPolicy 계층에 유지하기 위해, NoneDiscountPolicy 클래스를 추가할 수 있다.</p>
<p>결론은, 유연성이 필요한 곳에 추상화를 사용해라.</p>
<h5 id="추상-클래스와-인터페이스-트레이드오프"><a href="#추상-클래스와-인터페이스-트레이드오프" class="headerlink" title="추상 클래스와 인터페이스 트레이드오프"></a>추상 클래스와 인터페이스 트레이드오프</h5><p>코드에는 합당한 이유가 있어야한다.</p>
<h5 id="코드-재사용"><a href="#코드-재사용" class="headerlink" title="코드 재사용"></a>코드 재사용</h5><p>합성은, 다른 객체의 인스턴스를 자신의 인스턴스 변수로 포함해서 재사용하는 방법이다.</p>
<h5 id="상속"><a href="#상속" class="headerlink" title="상속"></a>상속</h5><p>상속의 단점은, </p>
<ol>
<li>캡슐화 위반이다.  부모 클래스가 변경되면,  자식 클래스도 함께 변경될 확률이 높다.</li>
<li>설계가 유연하지 않다. 부모클래스와 자식클래스의 관계를 컴파일 시점에 결정해서 실행시점에 객체의 종류를 변경할 수 없다.</li>
</ol>
<p>인스턴스 변수로 연결하면, 실행 시점에 할인 정책을 간단히 변경할 수 있다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Movie</span></span>&#123;</span><br><span class="line">  <span class="keyword">private</span> DiscountPolicy discountPolicy;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">changeDiscountPolicy</span><span class="params">(DiscountPolicy discountPolicy)</span></span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.discountPolicy = discountPolicy;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Moview avater = <span class="keyword">new</span> Movie(....., <span class="keyword">new</span> AmountDiscountPolicy);</span><br><span class="line">avater.changeDiscountPolicy(<span class="keyword">new</span> PercentDiscountPolicy());</span><br></pre></td></tr></table></figure>

<h5 id="합성"><a href="#합성" class="headerlink" title="합성"></a>합성</h5><p>인터페이스에 정의된 메세지를 통해서만 코드를 재사용하는 방법이 합성이다.</p>
<p>합성은 상속의 두가지 문제를 해결한다.</p>
<ol>
<li>인터페이스에 정의된 메세지를 통해서만 재사용하기 때문에 구현을 효과적으로 캡슐화한다.</li>
<li>의존하는 인스턴스를 교체하는 것이 쉽기 때문에 유연하다. 상속은 클래스를 통해 강하게 결합, 합성은 메세지를 통해 느슨하게 결합.</li>
</ol>

                    
                        

                    
                    
                        <p>
                            <a href="/2019/11/06/object-chapter2/#post-footer" class="postShorten-excerpt_link link">
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/2019/11/04/object-chapter1/">
                            [오브젝트] 1장_객체, 설계
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2019-11-04T00:00:00+09:00">
	
		    Nov 04, 2019
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/object/">Object</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p>소프트웨어 설계와 유지보수에 중점을 두려먼 이론이 아닌, 실무에 초점을 맞추어야한다. </p>
<p>설계를 설명할 때 가장 유용한 도구는 이론으로 치장된 개념과 용어가 아니라, 코드다.</p>
<h2 id="01-티켓-판매-애플리케이션-구현하기"><a href="#01-티켓-판매-애플리케이션-구현하기" class="headerlink" title="01 티켓 판매 애플리케이션 구현하기"></a>01 티켓 판매 애플리케이션 구현하기</h2><p>Code : Page 9</p>
<h2 id="02-무엇이-문제인가"><a href="#02-무엇이-문제인가" class="headerlink" title="02 무엇이 문제인가"></a>02 무엇이 문제인가</h2><p>로머트 마틴에 따르면 모든 모듈 ( 크기와 상관 없이 클래스나 패키지, 라이브러리와 같이 프로그램을 구성하는 임의의 요소 ) 은 </p>
<ol>
<li>제대로 실행되어야 하고</li>
<li>변경이 용이해야하고</li>
<li>이해하기 쉬워야 한다.</li>
</ol>
<h5 id="예상을-빗나가는-코드"><a href="#예상을-빗나가는-코드" class="headerlink" title="예상을 빗나가는 코드"></a>예상을 빗나가는 코드</h5><p>문제는 관람객과 판매원이, 소극장의 통제를 받는 수동적인 존재라는 것이다. 관람객의 입장에서 문제는 소극장이라는 제 3자가 초대장 확인을 위해 가방을 마음대로 열어본다. 판매원 입장에서는 문제는 소극장이 매표소에 보관 중인 티켓과 혐금에 마음대로 열어본다.</p>
<p>이해 가능한 코드란 동작이 우리의 예상에서 벗어나지 않는다. 현재의 코드는 우리의 상식과는 너무 다르게 동작하기 때문에 코드를 읽는 사람과 의사소통하지 못한다.</p>
<p>코드를 이해하기 어려운 또 다른 이유는, 코드를 이해하기 위해 세부적인 내용들을 모두 기억하고 있어야 한다는 것이다. Theater 의 enter 메서드를 이해하기 위해 Audience 가 Bag 을 가지고 있고, Bag 안에는 현금과 티켓이 들어있고, TicketSeller 가 TicketOffice 에서 티켓을 판매하고, TicketOffice 안에 돈과 티켓이 보관되어 있다는 모든 사실을 기억하고 있어야 한다.</p>
<p>가장 심각은 문제는 Audience 와 TicketSeller 를 변경할 경우 Theater 로 변경해야한다는 것이다.</p>
<h5 id="변경에-취약한-코드"><a href="#변경에-취약한-코드" class="headerlink" title="변경에 취약한 코드"></a>변경에 취약한 코드</h5><p>세부적인 사실 중 한 가지라도 바뀌면 해당 클래스뿐만 아니라 이 클래스에 의존하는 Theater 도 함께 변경해야한다. 이것은 객체 사이의 의존성과 관련된 문제이다.</p>
<p>우리의 목표는 기능을 구현하는 데 필요한 최소환의 의존성만 유지하고 불필요한 의존성을 제거하는 것이다. 객체 사이의 결합도를 낮춰 변경이 용이한 설계를 만들어야한다.</p>
<h2 id="03-설계-개선하기"><a href="#03-설계-개선하기" class="headerlink" title="03 설계 개선하기"></a>03 설계 개선하기</h2><p>Code : Page 18</p>
<p>관람객이 스스로 가방 안의 현금과 초대장을 처리하고, 판매원이 스스로 매표소의 티켓과 판매 요금을 다루게 한다면 모든 문제는 해결된다. 즉, 자율적인 존재로 만들어야한다.</p>
<h5 id="자율성을-높이자"><a href="#자율성을-높이자" class="headerlink" title="자율성을 높이자"></a>자율성을 높이자</h5><p>객체 내부의 세부적인 사항을 감추는 것을 캡슐화라고 한다. 객체 내부로의 접근을 제한하면 객체와 객체 사이의 결합도를 낮춰서 설계를 좀 더 쉽게 변경할 수 있게 한다.</p>
<p>캡슐화를 개선한 후에 가장 크데 달라진 점은 Audience 와 TicketSeller 가 내부 구현을 외부에 노출하지 않고 자신의 문제를 스스로 책임지고 해결한다는 것이다.</p>
<h5 id="무엇이-개선됐는가"><a href="#무엇이-개선됐는가" class="headerlink" title="무엇이 개선됐는가"></a>무엇이 개선됐는가</h5><p> Audience 와 TicketSeller 의 내부 구현을 변경하더라도 Theater 를 함께 변경할 필요가 없어졌다. 수정된 코드는 변경 용이성의 측면에서 확실히 개선됐다.</p>
<h5 id="어떻게-한-것인가"><a href="#어떻게-한-것인가" class="headerlink" title="어떻게 한 것인가"></a>어떻게 한 것인가</h5><p>자기 자신의 문제를 스스로 해결하도록 변경했다. 객체의 자율성을 높였다.</p>
<h5 id="캡슐화와-응집도"><a href="#캡슐화와-응집도" class="headerlink" title="캡슐화와 응집도"></a>캡슐화와 응집도</h5><p>핵심은, 객체 내부의 상태를 캡슐화하고 객체 간에 오직 메시지를 통해 상호작용하도록 만드는 것이다. </p>
<h5 id="절차지향과-객체지향"><a href="#절차지향과-객체지향" class="headerlink" title="절차지향과 객체지향"></a>절차지향과 객체지향</h5><p>Theater 의 enter 메서드는 프로세스, Audience, TicketSeller, Bag, TicketOffice 는 데이터다. </p>
<p>프로세스와 데이터를 별도의 모듈에 위치시키는 방식을 절차적 프로그래밍이라 한다. 모든 처리가 하나의 클래스 안에 위치하고 나머지 클래스는 단지 데이터의 역할만 수행한다. </p>
<p>데이터와 프로세스를 동일한 모듈 내부에 위치하도록 프로그래밍하는 방식을 객체지향 프로그래밍이라고 한다.</p>
<h5 id="책임의-이동"><a href="#책임의-이동" class="headerlink" title="책임의 이동"></a>책임의 이동</h5><p>두 방식의 근본적인 차이를 만드는 것은 책임의 이동이다. 객체지향설계에서는 독재자가 없고, 각 객체에 책임이 적절히 분배된다.</p>
<p>변경 전의 절차적 설계에서는 Theater 가 전체적인 작업을 도맡아 했다. 변경 후의 객체지향 설계에서는 각 객체가 자신이 맡은 일을 스스로 처리했다. </p>
<h5 id="더-개선할-수-있다"><a href="#더-개선할-수-있다" class="headerlink" title="더 개선할 수 있다"></a>더 개선할 수 있다</h5><p>Code : Page 29</p>
<p>어떤 기능을 설계하는 방법은 한 가지 이상일 수 있다. 그래서 설계는 트데이오프의 산물이다. </p>
<h5 id="그래-거짓말이다"><a href="#그래-거짓말이다" class="headerlink" title="그래, 거짓말이다!"></a>그래, 거짓말이다!</h5><p>Theater, Bag, TicketOffice 는 실세계에서 자율적인 존재가 아니다. 하지만 비록 현실에서는 수동적인 존재라고 하더라도 객체지향 세계에서는 모든 것이 능동적이고 자율적인 존재가 된다. 이것을 의인화라고 한다.</p>
<h2 id="객체지향-설계"><a href="#객체지향-설계" class="headerlink" title="객체지향 설계"></a>객체지향 설계</h2><h5 id="설계가-왜-필요한가"><a href="#설계가-왜-필요한가" class="headerlink" title="설계가 왜 필요한가"></a>설계가 왜 필요한가</h5><p>설계란 코드를 배치하는 것이다. 첫 번째 코드에서는 데이터와 프로세스를 나누어 별도의 클래스에 배치했지만, 두 번째 코드에서는 필요한 데이터를 보유한 클래스 안에 프로세스를 함께 배치했다.</p>
<p>변경을 수용할 수 있는 설계가 중요한 이유는 요구사항이 항상 변경되기 때문이다. 그리고 코드를 변경할 때 버그가 추가될 가능성이 높기 때문이다.</p>
<h5 id="객체지향-설계-1"><a href="#객체지향-설계-1" class="headerlink" title="객체지향 설계"></a>객체지향 설계</h5><p>훌륭한 객체지향 설계는, 협력하는 객체 사이의 의존성을 적절하게 관리하는 설계다. 협력하는 객체들 사이의 의존성을 적절하게 조절해서 변경에 용이한 설계를 만들어야한다.</p>

                    
                        

                    
                    
                        <p>
                            <a href="/2019/11/04/object-chapter1/#post-footer" class="postShorten-excerpt_link link">
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
        
        <li class="pagination-number">page 1 of 1</li>
    </ul>
</div>

</section>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2019 junhee.ko. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/profile.jpg" alt="Author&#39;s picture"/>
        
            <h4 id="about-card-name">junhee.ko</h4>
        
            <div id="about-card-bio"><p>Always Learning</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>Engineer</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br/>
                Incheon
            </div>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->
<script src="/assets/js/jquery.js"></script>
<script src="/assets/js/jquery.fancybox.js"></script>
<script src="/assets/js/thumbs.js"></script>
<script src="/assets/js/tranquilpeak.js"></script>
<!--SCRIPTS END-->



    </body>
</html>
